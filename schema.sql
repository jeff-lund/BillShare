DROP TABLE IF EXISTS user;
DROP TABLE IF EXISTS bills;
DROP TABLE IF EXISTS topics;
DROP TABLE IF EXISTS groups;

CREATE TABLE user (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  username TEXT UNIQUE NOT NULL,
  password TEXT NOT NULL
);

CREATE TABLE topics (
  id INTEGER,
  group_id INTEGER NOT NULL,
  topic TEXT NOT NULL,
  FOREIGN KEY (id) REFERENCES user (id),
  FOREIGN KEY (group_id) REFERENCES groups (group_id)
);

CREATE TABLE bills (
  id INTEGER NOT NULL,
  bill_id INTEGER PRIMARY KEY AUTOINCREMENT,
  group_id INTEGER NOT NULL,
  topic TEXT NOT NULL,
  total REAL NOT NULL,
  posted_date TEXT,
  due_date TEXT NOT NULL,
  paid INTEGER NOT NULL,
  past_due INTEGER NOT NULL,
  FOREIGN KEY (id) REFERENCES user (id),
  FOREIGN KEY (topic) REFERENCES topics (topic),
  FOREIGN KEY (group_id) REFERENCES groups (group_id)
);

CREATE TABLE groups (
  group_id INTEGER PRIMARY KEY AUTOINCREMENT,
  owner_id INTEGER NOT NULL,
  name TEXT NOT NULL
);
